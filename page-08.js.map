{"version":3,"file":"page-08.js","sources":["../src/js/page08.js"],"sourcesContent":["console.log('page 08. Weather');\n////// Погода в містах світу\n\nconst search = document.querySelector('.js-search');\nconst list = document.querySelector('.js-list');\n\n// console.log(search);\nsearch.addEventListener('submit', onSearch);\n\nfunction onSearch(evt){\n    evt.preventDefault();\n    console.log(evt.currentTarget.elements);\n\n    const{query, days} = evt.currentTarget.elements;\n\n    // console.log(query.value);\n    // console.log(days.value);\n   \n    getWeather(query.value, days.value)\n    .then(data =>{\n        console.log(data.forecast.forecastday);\n        list.innerHTML = '';\n\n        createMarkUp(data.forecast.forecastday)\n   \n      })\n    .catch(err=>console.log(err));\n    \n}\n// http://api.weatherapi.com/v1/forecast.json?key=65fc8710104c48e595e140016252406&q=Paris\n\n\nfunction getWeather(city, days){\n\n    const BASE_URL = 'https://api.weatherapi.com/v1';\n    const API_KEY = '65fc8710104c48e595e140016252406';\n    \n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: city,\n        days: days,\n        lang: 'uk',\n    });\n    // console.log(params.toString());\n    // `${BASE_URL}/forecast.json?key=${API_KEY}&q=${city}&days=${days}&lang=uk`\n    return fetch(`${BASE_URL}/forecast.json?${params}`)\n    .then(resp=>{\n        // console.log(resp)\n        // console.log(resp.json());    ////// повертає проміс\n        if(!resp.ok){\n            throw new Error(resp.statusText)\n        }\n        return resp.json();\n    })\n}\n\nfunction createMarkUp(arr){\n   const markUp = arr.map(({date, day: { avgtemp_c, condition: { text, icon}}})=>`\n            <li class=\"p8_li\">\n                <img src=\"${icon}\" alt=\"${text}\">\n                <p>${text}</p>\n                <h2>${date}</h2>\n                <h3>${avgtemp_c}</h3>\n            </li>\n        `).join('');\n\n     return  list.insertAdjacentHTML('beforeend', markUp);\n}\n\n"],"names":["search","list","onSearch","evt","query","days","getWeather","data","createMarkUp","err","city","BASE_URL","API_KEY","params","resp","arr","markUp","date","avgtemp_c","text","icon"],"mappings":"oCAAA,QAAQ,IAAI,kBAAkB,EAG9B,MAAMA,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAO,SAAS,cAAc,UAAU,EAG9CD,EAAO,iBAAiB,SAAUE,CAAQ,EAE1C,SAASA,EAASC,EAAI,CAClBA,EAAI,eAAgB,EACpB,QAAQ,IAAIA,EAAI,cAAc,QAAQ,EAEtC,KAAK,CAAC,MAAAC,EAAO,KAAAC,CAAI,EAAIF,EAAI,cAAc,SAKvCG,EAAWF,EAAM,MAAOC,EAAK,KAAK,EACjC,KAAKE,GAAO,CACT,QAAQ,IAAIA,EAAK,SAAS,WAAW,EACrCN,EAAK,UAAY,GAEjBO,EAAaD,EAAK,SAAS,WAAW,CAEvC,CAAA,EACF,MAAME,GAAK,QAAQ,IAAIA,CAAG,CAAC,CAEhC,CAIA,SAASH,EAAWI,EAAML,EAAK,CAE3B,MAAMM,EAAW,gCACXC,EAAU,kCAEVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGF,EACH,KAAML,EACN,KAAM,IACd,CAAK,EAGD,OAAO,MAAM,GAAGM,CAAQ,kBAAkBE,CAAM,EAAE,EACjD,KAAKC,GAAM,CAGR,GAAG,CAACA,EAAK,GACL,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEnC,OAAOA,EAAK,KAAM,CACrB,CAAA,CACL,CAEA,SAASN,EAAaO,EAAI,CACvB,MAAMC,EAASD,EAAI,IAAI,CAAC,CAAC,KAAAE,EAAM,IAAK,CAAE,UAAAC,EAAW,UAAW,CAAE,KAAAC,EAAM,KAAAC,CAAI,CAAC,CAAC,IAAI;AAAA;AAAA,4BAErDA,CAAI,UAAUD,CAAI;AAAA,qBACzBA,CAAI;AAAA,sBACHF,CAAI;AAAA,sBACJC,CAAS;AAAA;AAAA,SAEtB,EAAE,KAAK,EAAE,EAEb,OAAQjB,EAAK,mBAAmB,YAAae,CAAM,CACxD"}