{"version":3,"file":"page-10.js","sources":["../src/js/page10.js"],"sourcesContent":["console.log('page 10. Observer');\n\nconst list = document.querySelector('ul.js-list');\nconst loadMore = document.querySelector('[type=\"button\"]');\nconst target = document.querySelector('.js-guard');\nlet currentPage = 1;\n\nvar options = {\n  root: null,\n  rootMargin: \"200px\",\n  threshold: 1.0,\n};\n\nvar observer = new IntersectionObserver(onLoad, options);\nfunction onLoad(entries, observer){\n    entries.forEach((entry)=>{\n        if(entry.isIntersecting){\n                console.log(entries);\n                currentPage += 1 ;\n\n                getTrending(currentPage).then(data=>{\n\n                markUp(data.results);\n                if(data.page === data.total_pages){\n                 observer.unobserve(target);\n                 }\n                              \n                })\n                .catch(err=>console.log(err));\n            }\n    })\n }\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst ENDPOINT = 'trending/movie/day';\nconst API_KEY = '3af5fd0b838bf2a259ff06cb75968037';\n\nfunction getTrending(page=1){\n    return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`).then((resp)=>{\n        if(!resp.ok){\n            throw new Error(resp.statusText);\n        }\n        return resp.json();\n    })\n}\ngetTrending().then(data=>{\n\n    markUp(data.results);\n    observer.observe(target);   \n})\n.catch(err=>console.log(err));\n\nfunction markUp(arr){\n    let draft = null;\n    draft = arr.map(({poster_path, title})=>{\n\n//////there is an image width in the endpoint     \n      return   `\n         <li class=\"box_09\">\n<img src=\"https://image.tmdb.org/t/p/w400${poster_path}\" title=${title}>\n            <h2>${title}<h2>\n         </li>\n    `\n    }\n)\n    return list.insertAdjacentHTML('beforeend', draft);\n}\n\nlet counter = 1;\nwindow.addEventListener('scroll', onScroll)\n\nfunction onScroll(){\n    counter += 1\n    console.log(counter);\n}\n"],"names":["list","target","currentPage","options","observer","onLoad","entries","entry","getTrending","data","markUp","err","BASE_URL","ENDPOINT","API_KEY","page","resp","arr","draft","poster_path","title","counter","onScroll"],"mappings":"oCAAA,QAAQ,IAAI,mBAAmB,EAE/B,MAAMA,EAAO,SAAS,cAAc,YAAY,EAC/B,SAAS,cAAc,iBAAiB,EACzD,MAAMC,EAAS,SAAS,cAAc,WAAW,EACjD,IAAIC,EAAc,EAElB,IAAIC,EAAU,CACZ,KAAM,KACN,WAAY,QACZ,UAAW,CACb,EAEIC,EAAW,IAAI,qBAAqBC,EAAQF,CAAO,EACvD,SAASE,EAAOC,EAASF,EAAS,CAC9BE,EAAQ,QAASC,GAAQ,CAClBA,EAAM,iBACD,QAAQ,IAAID,CAAO,EACnBJ,GAAe,EAEfM,EAAYN,CAAW,EAAE,KAAKO,GAAM,CAEpCC,EAAOD,EAAK,OAAO,EAChBA,EAAK,OAASA,EAAK,aACrBL,EAAS,UAAUH,CAAM,CAGzB,CAAA,EACA,MAAMU,GAAK,QAAQ,IAAIA,CAAG,CAAC,EAEvC,CAAA,CACL,CAEA,MAAMC,EAAW,gCACXC,EAAW,qBACXC,EAAU,mCAEhB,SAASN,EAAYO,EAAK,EAAE,CACxB,OAAO,MAAM,GAAGH,CAAQ,GAAGC,CAAQ,YAAYC,CAAO,SAASC,CAAI,EAAE,EAAE,KAAMC,GAAO,CAChF,GAAG,CAACA,EAAK,GACL,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEnC,OAAOA,EAAK,KAAM,CACrB,CAAA,CACL,CACAR,EAAa,EAAC,KAAKC,GAAM,CAErBC,EAAOD,EAAK,OAAO,EACnBL,EAAS,QAAQH,CAAM,CAC3B,CAAC,EACA,MAAMU,GAAK,QAAQ,IAAIA,CAAG,CAAC,EAE5B,SAASD,EAAOO,EAAI,CAChB,IAAIC,EAAQ,KACZ,OAAAA,EAAQD,EAAI,IAAI,CAAC,CAAC,YAAAE,EAAa,MAAAC,CAAK,IAGzB;AAAA;AAAA,2CAE4BD,CAAW,WAAWC,CAAK;AAAA,kBACpDA,CAAK;AAAA;AAAA,KAIvB,EACWpB,EAAK,mBAAmB,YAAakB,CAAK,CACrD,CAEA,IAAIG,EAAU,EACd,OAAO,iBAAiB,SAAUC,CAAQ,EAE1C,SAASA,GAAU,CACfD,GAAW,EACX,QAAQ,IAAIA,CAAO,CACvB"}